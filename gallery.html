<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery - Bright Future Academy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700;800;900&family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
        --accent: #f0a500;
        --accent2: #e05c2a;
        --text: #ffffff;
        --card-bg: rgba(255,255,255,0.08);
        --card-border: rgba(255,255,255,0.15);
        --nav-bg: rgba(10,20,50,0.85);
        --filter-color: #a0c4ff;
        --filter-border: rgba(160,196,255,0.5);
        --filter-active-bg: rgba(160,196,255,0.2);
        --section-title-color: #ffffff;
        --section-sub-color: rgba(255,255,255,0.65);
    }

    body.white-mode {
        --text: #1a1a2e;
        --card-bg: rgba(255,255,255,0.92);
        --card-border: rgba(26,58,110,0.15);
        --nav-bg: rgba(255,255,255,0.95);
        --filter-color: #1a3a6e;
        --filter-border: rgba(26,58,110,0.3);
        --filter-active-bg: rgba(26,58,110,0.1);
        --section-title-color: #1a1a2e;
        --section-sub-color: rgba(26,26,46,0.65);
    }

    body { font-family: 'Raleway', sans-serif; overflow-x: hidden; }

    /* ======= 3D CANVAS (fixed, behind gallery section) ======= */
    #bg-canvas {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: -2;
        transition: opacity 0.6s ease;
    }
    .white-bg-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: linear-gradient(135deg, #f0f4ff 0%, #e8edf8 40%, #f5f0ff 100%);
        z-index: -2;
        opacity: 0;
        transition: opacity 0.6s ease;
        pointer-events: none;
    }
    body.white-mode #bg-canvas { opacity: 0; }
    body.white-mode .white-bg-overlay { opacity: 1; }

    /* ======= THEME TOGGLE ======= */
    .theme-toggle {
        position: fixed;
        top: 4.8rem;
        right: 1.5rem;
        z-index: 1100;
        display: flex;
        align-items: center;
        gap: 0.6rem;
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 50px;
        padding: 0.4rem 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.8rem;
        font-weight: 600;
        letter-spacing: 0.05em;
        color: var(--text);
    }
    .theme-toggle:hover { transform: scale(1.05); }
    body.white-mode .theme-toggle {
        background: rgba(26,58,110,0.1);
        border-color: rgba(26,58,110,0.25);
    }
    .toggle-knob {
        width: 36px; height: 20px;
        background: rgba(255,255,255,0.3);
        border-radius: 10px;
        position: relative;
        transition: background 0.3s;
    }
    .toggle-knob::after {
        content: '';
        position: absolute;
        top: 3px; left: 3px;
        width: 14px; height: 14px;
        background: white;
        border-radius: 50%;
        transition: transform 0.3s;
    }
    body.white-mode .toggle-knob { background: #1a3a6e; }
    body.white-mode .toggle-knob::after { transform: translateX(16px); }

    /* ======= NAVBAR ======= */
    .navbar {
        position: fixed; top: 0; left: 0; right: 0;
        z-index: 1000;
        background: var(--nav-bg);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255,255,255,0.1);
        transition: background 0.4s ease;
    }
    body.white-mode .navbar { border-bottom-color: rgba(26,58,110,0.1); }
    .nav-inner {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 64px;
    }
    .logo {
        display: flex; align-items: center; gap: 0.7rem;
        font-family: 'Cormorant Garamond', serif;
        font-size: 1.3rem; font-weight: 700;
        color: var(--text); text-decoration: none;
    }
    .logo i { color: var(--accent); font-size: 1.5rem; }
    .nav-links { display: flex; gap: 2rem; align-items: center; }
    .nav-links a {
        color: var(--text); text-decoration: none;
        font-size: 0.85rem; font-weight: 600;
        letter-spacing: 0.05em; opacity: 0.8;
        transition: opacity 0.2s, color 0.2s;
    }
    .nav-links a:hover, .nav-links a.active { opacity: 1; color: var(--accent); }

    /* ======= FULL-SCREEN HERO (UNCHANGED) ======= */
    .gallery-hero {
        position: relative;
        width: 100%;
        height: calc(100vh - 80px);
        min-height: 650px;
        background: linear-gradient(135deg, #06101f 0%, #0a1e4a 35%, #0e2d6b 65%, #061430 100%);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding-bottom: 230px;
        margin-top: 64px;
    }

    .hero-photos { position: absolute; inset: 0; pointer-events: none; z-index: 1; }
    .hero-photo {
        position: absolute; border-radius: 18px; overflow: hidden;
        box-shadow: 0 20px 70px rgba(0,0,0,0.7); opacity: 0.5;
    }
    .hero-photo img { width: 100%; height: 100%; object-fit: cover; display: block; }

    .hero-photo:nth-child(1)  { width:300px; height:215px; top:3%;  left:0%;   animation: fp1  9s ease-in-out infinite 0s; }
    .hero-photo:nth-child(2)  { width:260px; height:185px; top:52%; left:-1%;  animation: fp2 11s ease-in-out infinite 1s; }
    .hero-photo:nth-child(3)  { width:340px; height:240px; top:2%;  left:20%;  animation: fp3 10s ease-in-out infinite 2s; }
    .hero-photo:nth-child(4)  { width:280px; height:200px; top:57%; left:17%;  animation: fp1  8s ease-in-out infinite 0.5s; }
    .hero-photo:nth-child(5)  { width:320px; height:225px; top:1%;  right:19%; animation: fp2 12s ease-in-out infinite 1.5s; }
    .hero-photo:nth-child(6)  { width:265px; height:190px; top:54%; right:17%; animation: fp3  9s ease-in-out infinite 3s; }
    .hero-photo:nth-child(7)  { width:295px; height:210px; top:3%;  right:0%;  animation: fp1 11s ease-in-out infinite 2s; }
    .hero-photo:nth-child(8)  { width:245px; height:175px; top:58%; right:-1%; animation: fp2  8s ease-in-out infinite 0.8s; }
    .hero-photo:nth-child(9)  { width:215px; height:155px; top:29%; left:5%;   animation: fp3 13s ease-in-out infinite 4s;   opacity:0.32; }
    .hero-photo:nth-child(10) { width:215px; height:155px; top:27%; right:5%;  animation: fp1 10s ease-in-out infinite 3.5s; opacity:0.32; }
    .hero-photo:nth-child(11) { width:195px; height:140px; top:74%; left:41%;  animation: fp2 14s ease-in-out infinite 1s;   opacity:0.30; }
    .hero-photo:nth-child(12) { width:205px; height:148px; top:76%; left:7%;   animation: fp3  9s ease-in-out infinite 2s;   opacity:0.30; }

    @keyframes fp1 {
        0%,100% { transform: translateY(0px)   rotate(-5deg) scale(1); }
        25%     { transform: translateY(-32px) rotate(3deg)  scale(1.05); }
        50%     { transform: translateY(-14px) rotate(-8deg) scale(0.97); }
        75%     { transform: translateY(-40px) rotate(4deg)  scale(1.07); }
    }
    @keyframes fp2 {
        0%,100% { transform: translateY(0px)   rotate(6deg)  scale(1); }
        30%     { transform: translateY(-28px) rotate(-4deg) scale(1.06); }
        60%     { transform: translateY(-42px) rotate(9deg)  scale(0.95); }
    }
    @keyframes fp3 {
        0%,100% { transform: translateY(-15px) rotate(-3deg) scale(1); }
        40%     { transform: translateY(18px)  rotate(6deg)  scale(1.05); }
        70%     { transform: translateY(-35px) rotate(-7deg) scale(0.97); }
    }

    .hero-overlay {
        position: absolute; inset: 0; z-index: 2;
        background: radial-gradient(ellipse 52% 48% at 50% 48%,
            rgba(8,20,55,0.38) 0%, rgba(6,14,32,0.84) 100%);
    }

    .hero-content {
        position: relative; z-index: 10;
        text-align: center; color: #fff; padding: 2rem;
        animation: heroIn 1s ease both;
    }
    @keyframes heroIn {
        from { opacity:0; transform:translateY(32px); }
        to   { opacity:1; transform:translateY(0); }
    }
    .hero-content h1 {
        font-family: 'Cormorant Garamond', serif;
        font-size: clamp(3rem, 8vw, 6rem); font-weight: 900;
        margin-bottom: 0.55rem;
        text-shadow: 0 4px 32px rgba(0,0,0,0.55);
    }
    .hero-content p {
        font-size: clamp(1rem, 2vw, 1.3rem); opacity: 0.85;
        margin-bottom: 1.6rem; letter-spacing: 0.07em;
    }
    .breadcrumb {
        display: flex; align-items: center; justify-content: center; gap: 0.5rem;
        font-size: 0.9rem; opacity: 0.72;
    }
    .breadcrumb a { color: #fff; text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }

    .scroll-hint {
        position: absolute; bottom: 200px; left: 50%; transform: translateX(-50%);
        z-index: 10; color: rgba(255,255,255,0.6); font-size: 1.5rem;
        animation: bounceDown 2s ease-in-out infinite;
    }
    @keyframes bounceDown {
        0%,100% { transform: translateX(-50%) translateY(0); }
        50%     { transform: translateX(-50%) translateY(10px); }
    }

    .hero-ribbon {
        position: absolute; bottom: 106px; left: 0; right: 0;
        height: 118px; display: flex; align-items: center;
        overflow: hidden; z-index: 8;
    }
    .ribbon-track {
        display: flex; gap: 14px;
        animation: ribbonScroll 26s linear infinite;
        white-space: nowrap; align-items: center; padding: 6px 0 8px;
    }
    .ribbon-track:hover { animation-play-state: paused; }
    .ribbon-img {
        flex-shrink: 0; width: 170px; height: 104px;
        border-radius: 12px; overflow: hidden; opacity: 0.72;
        transition: opacity 0.3s; box-shadow: 0 4px 16px rgba(0,0,0,0.5);
    }
    .ribbon-img:hover { opacity: 1; }
    .ribbon-img img { width: 100%; height: 100%; object-fit: cover; display: block; }
    @keyframes ribbonScroll {
        0%   { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    .hero-wave {
        position: absolute; bottom: -1px; left: 0; right: 0; z-index: 7; line-height: 0;
    }
    .hero-wave svg { display: block; width: 100%; height: 108px; }

    /* ======= GALLERY SECTION (3D canvas bg) ======= */
    .gallery-section-3d {
        position: relative;
        padding: 6rem 0 8rem;
        /* transparent so canvas shows through */
        background: transparent;
        overflow: hidden;
        isolation: isolate;
    }

    /* White mode: give section a semi-white tint so cards readable */
    body.white-mode .gallery-section-3d {
        background: transparent;
    }

    .gallery-section-3d .container { position: relative; z-index: 2; }

    /* ======= SECTION HEADER ======= */
    .section-tag {
        display: inline-block;
        font-size: 0.72rem; font-weight: 700;
        letter-spacing: 0.2em; text-transform: uppercase;
        color: var(--accent);
        background: rgba(240,165,0,0.15);
        border: 1px solid rgba(240,165,0,0.3);
        padding: 0.3rem 0.9rem; border-radius: 50px; margin-bottom: 1rem;
    }
    .section-title {
        font-family: 'Cormorant Garamond', serif;
        font-size: clamp(2rem, 4vw, 3rem); font-weight: 700;
        color: var(--section-title-color); line-height: 1.1;
        margin-bottom: 0.75rem;
    }
    .section-subtitle {
        color: var(--section-sub-color);
        max-width: 580px; margin: 0 auto 2.5rem;
        line-height: 1.75; font-size: 1rem;
    }

    /* ======= FILTER BUTTONS ======= */
    .gallery-filters {
        display: flex; flex-wrap: wrap; justify-content: center;
        gap: 0.75rem; margin-bottom: 3rem;
    }
    .filter-btn {
        padding: 0.55rem 1.45rem;
        border: 2px solid var(--filter-border);
        background: transparent;
        color: var(--filter-color);
        border-radius: 50px;
        font-family: 'Raleway', sans-serif;
        font-size: 0.88rem; font-weight: 600; cursor: pointer;
        transition: all 0.25s ease;
    }
    .filter-btn:hover, .filter-btn.active {
        background: var(--accent);
        border-color: var(--accent);
        color: #fff;
    }

    /* ======= MASONRY GALLERY GRID ======= */
    .gallery-grid { columns: 3 280px; column-gap: 1.3rem; }

    .gallery-item {
        break-inside: avoid; margin-bottom: 1.3rem; border-radius: 14px;
        overflow: hidden; position: relative; cursor: pointer;
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        backdrop-filter: blur(12px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        opacity: 0; transform: translateY(42px) scale(0.96);
        transition: opacity 0.65s ease, transform 0.65s ease, box-shadow 0.35s ease;
    }
    .gallery-item.visible { opacity: 1; transform: translateY(0) scale(1); }

    .gallery-item.visible:nth-child(3n+1) { animation: cf1 6s ease-in-out infinite 0s; }
    .gallery-item.visible:nth-child(3n+2) { animation: cf2 7s ease-in-out infinite 1s; }
    .gallery-item.visible:nth-child(3n+3) { animation: cf3 8s ease-in-out infinite 0.5s; }
    @keyframes cf1 { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
    @keyframes cf2 { 0%,100%{transform:translateY(-3px)} 50%{transform:translateY(6px)} }
    @keyframes cf3 { 0%,100%{transform:translateY(0) rotate(0.3deg)} 50%{transform:translateY(-7px) rotate(-0.3deg)} }

    .gallery-item:hover {
        box-shadow: 0 24px 60px rgba(240,165,0,0.25), 0 8px 20px rgba(0,0,0,0.2) !important;
        transform: translateY(-9px) scale(1.02) !important;
        animation-play-state: paused !important;
    }
    .gallery-item img { width: 100%; display: block; transition: transform 0.5s ease; }
    .gallery-item:hover img { transform: scale(1.08); }

    .gallery-overlay {
        position: absolute; inset: 0;
        background: linear-gradient(to top, rgba(26,58,110,0.9) 0%, transparent 52%);
        opacity: 0; transition: opacity 0.35s ease;
        display: flex; align-items: flex-end; padding: 1.3rem;
    }
    .gallery-item:hover .gallery-overlay { opacity: 1; }
    .gallery-caption { color: #fff; }
    .gallery-caption h4 { margin: 0 0 0.2rem; font-size: 1rem; font-weight: 700; }
    .gallery-caption span { font-size: 0.76rem; opacity: 0.85; text-transform: uppercase; letter-spacing: 0.07em; }

    .gallery-zoom {
        position: absolute; top: 1rem; right: 1rem;
        width: 38px; height: 38px; background: rgba(255,255,255,0.18);
        backdrop-filter: blur(5px); border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        color: #fff; font-size: 0.9rem; opacity: 0; transition: opacity 0.3s;
    }
    .gallery-item:hover .gallery-zoom { opacity: 1; }

    /* ======= LIGHTBOX ======= */
    .lightbox {
        display: none; position: fixed; inset: 0;
        background: rgba(0,0,0,0.94); z-index: 9999;
        align-items: center; justify-content: center; padding: 2rem;
    }
    .lightbox.open { display: flex; }
    .lightbox-inner { position: relative; max-width: 920px; width: 100%; }
    .lightbox-inner img {
        width: 100%; border-radius: 14px; max-height: 82vh; object-fit: contain;
        animation: lbIn 0.3s ease both;
    }
    @keyframes lbIn { from{transform:scale(0.87);opacity:0} to{transform:scale(1);opacity:1} }
    .lightbox-close {
        position: absolute; top: -2.6rem; right: 0;
        background: none; border: none; color: #fff;
        font-size: 1.9rem; cursor: pointer; opacity: 0.75; transition: opacity 0.2s;
    }
    .lightbox-close:hover { opacity: 1; }
    .lightbox-nav {
        position: absolute; top: 50%; transform: translateY(-50%);
        background: rgba(255,255,255,0.14); border: none; color: #fff;
        width: 48px; height: 48px; border-radius: 50%; font-size: 1.1rem; cursor: pointer;
        transition: background 0.2s, transform 0.2s;
        display: flex; align-items: center; justify-content: center;
    }
    .lightbox-nav:hover { background: rgba(255,255,255,0.28); transform: translateY(-50%) scale(1.1); }
    .lightbox-prev { left: -3.8rem; }
    .lightbox-next { right: -3.8rem; }
    .lightbox-caption {
        text-align: center; color: rgba(255,255,255,0.82);
        margin-top: 1rem; font-size: 0.95rem;
    }

    /* ======= FOOTER ======= */
    footer {
        background: rgba(10,20,50,0.9);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255,255,255,0.08);
        padding: 4rem 0 2rem;
    }
    body.white-mode footer { background: rgba(26,58,110,0.95); }

    .footer-grid {
        max-width: 1200px; margin: 0 auto; padding: 0 2rem;
        display: grid; grid-template-columns: 2fr 1fr 1fr 1.5fr;
        gap: 3rem; margin-bottom: 3rem;
    }
    .footer-logo {
        display: flex; align-items: center; gap: 0.7rem;
        font-family: 'Cormorant Garamond', serif;
        font-size: 1.2rem; font-weight: 700;
        color: white; margin-bottom: 1rem;
    }
    .footer-logo i { color: var(--accent); }
    .footer-desc { font-size: 0.88rem; opacity: 0.65; line-height: 1.7; color: white; }
    .social-links { display: flex; gap: 0.7rem; margin-top: 1.2rem; }
    .social-link {
        width: 36px; height: 36px; background: rgba(255,255,255,0.1);
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        color: white; font-size: 0.85rem; text-decoration: none;
        transition: background 0.2s, transform 0.2s;
    }
    .social-link:hover { background: var(--accent); transform: translateY(-3px); }
    .footer-col h4 { color: white; font-size: 0.85rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 1.2rem; }
    .footer-links { list-style: none; }
    .footer-links li { margin-bottom: 0.6rem; }
    .footer-links a { color: rgba(255,255,255,0.6); text-decoration: none; font-size: 0.88rem; transition: color 0.2s; }
    .footer-links a:hover { color: var(--accent); }
    .footer-contact { list-style: none; }
    .footer-contact li { display: flex; gap: 0.8rem; color: rgba(255,255,255,0.65); font-size: 0.88rem; margin-bottom: 0.8rem; align-items: flex-start; line-height: 1.5; }
    .footer-contact i { color: var(--accent); margin-top: 2px; flex-shrink: 0; }
    .footer-bottom {
        max-width: 1200px; margin: 0 auto; padding: 2rem 2rem 0;
        border-top: 1px solid rgba(255,255,255,0.1);
        display: flex; justify-content: space-between; align-items: center;
        font-size: 0.82rem; color: rgba(255,255,255,0.5);
    }
    .footer-bottom a { color: rgba(255,255,255,0.5); text-decoration: none; margin-left: 1.5rem; transition: color 0.2s; }
    .footer-bottom a:hover { color: var(--accent); }

    .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }

    @media(max-width:900px) {
        .hero-photo:nth-child(3),.hero-photo:nth-child(4),
        .hero-photo:nth-child(5),.hero-photo:nth-child(6),
        .hero-photo:nth-child(9),.hero-photo:nth-child(10),
        .hero-photo:nth-child(11),.hero-photo:nth-child(12) { display:none; }
        .footer-grid { grid-template-columns: 1fr 1fr; }
    }
    @media(max-width:600px) {
        .gallery-grid { columns: 1; }
        .hero-photo:nth-child(n+3) { display:none; }
        .lightbox-prev { left:-2rem; } .lightbox-next { right:-2rem; }
        .nav-links { display: none; }
        .footer-grid { grid-template-columns: 1fr; }
        .footer-bottom { flex-direction: column; gap: 1rem; text-align: center; }
    }
    </style>
</head>
<body>

    <!-- White BG Overlay -->
    <div class="white-bg-overlay"></div>

    <!-- 3D Canvas Background -->
    <canvas id="bg-canvas"></canvas>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
        <i class="fas fa-cube" id="toggle-icon"></i>
        <div class="toggle-knob"></div>
        <span id="toggle-label">3D</span>
    </button>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-inner">
            <a href="index.html" class="logo">
                <i class="fas fa-graduation-cap"></i>
                Bright Future Academy
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="about.html">About Us</a>
                <a href="admissions.html">Admissions</a>
                <a href="academics.html">Academics</a>
                <a href="gallery.html" class="active">Gallery</a>
                <a href="contact.html">Contact</a>
            </div>
        </div>
    </nav>

    <!-- ═══ FULL-SCREEN HERO (UNCHANGED) ═══ -->
    <section class="gallery-hero">
        <div class="hero-photos">
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1562774053-701939374585?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1532094349884-543559c5f185?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1517649763962-0c623066013b?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1546519638-68e109498ffc?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=600&q=80" alt=""></div>
            <div class="hero-photo"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600&q=80" alt=""></div>
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <h1>Photo Gallery</h1>
            <p>Moments Captured, Memories Cherished</p>
            <div class="breadcrumb">
                <a href="index.html">Home</a>
                <i class="fas fa-chevron-right" style="font-size:0.65rem;"></i>
                <span>Gallery</span>
            </div>
        </div>
        <div class="scroll-hint"><i class="fas fa-chevron-down"></i></div>
        <div class="hero-ribbon">
            <div class="ribbon-track">
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1517649763962-0c623066013b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1562774053-701939374585?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1532094349884-543559c5f185?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1509062522246-3755977927d7?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1546519638-68e109498ffc?w=300&q=70" alt=""></div>
                <!-- duplicate for seamless loop -->
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1517649763962-0c623066013b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1562774053-701939374585?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1532094349884-543559c5f185?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1509062522246-3755977927d7?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=300&q=70" alt=""></div>
                <div class="ribbon-img"><img src="https://images.unsplash.com/photo-1546519638-68e109498ffc?w=300&q=70" alt=""></div>
            </div>
        </div>
        <div class="hero-wave">
            <svg viewBox="0 0 1440 108" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0,54 C180,108 360,0 540,54 C720,108 900,0 1080,54 C1260,108 1350,26 1440,54 L1440,108 L0,108 Z" fill="transparent"/>
            </svg>
        </div>
    </section>

    <!-- ═══ GALLERY SECTION with 3D canvas bg ═══ -->
    <section class="gallery-section-3d">
        <div class="container">
            <div style="text-align:center; margin-bottom:1rem;">
                <span class="section-tag">Our School Life</span>
                <h2 class="section-title">Glimpses of Bright Future Academy</h2>
                <p class="section-subtitle">Explore moments from classrooms, sports, cultural events, and everyday life at our campus.</p>
            </div>

            <!-- Filter buttons -->
            <div class="gallery-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="classroom">Classrooms</button>
                <button class="filter-btn" data-filter="sports">Sports</button>
                <button class="filter-btn" data-filter="events">Events</button>
                <button class="filter-btn" data-filter="campus">Campus</button>
                <button class="filter-btn" data-filter="science">Science &amp; Labs</button>
            </div>

            <!-- Masonry gallery -->
            <div class="gallery-grid" id="galleryGrid">
                <div class="gallery-item" data-category="classroom" data-title="Interactive Learning" data-caption="Classroom">
                    <img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=600&q=80" alt="Classroom Learning" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Interactive Learning</h4><span>Classroom</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="sports" data-title="Sports Day" data-caption="Sports">
                    <img src="https://images.unsplash.com/photo-1517649763962-0c623066013b?w=600&q=80" alt="Sports Day" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Sports Day</h4><span>Sports</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="campus" data-title="School Campus" data-caption="Campus">
                    <img src="https://images.unsplash.com/photo-1562774053-701939374585?w=600&q=80" alt="School Campus" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>School Campus</h4><span>Campus</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="events" data-title="Annual Day Celebration" data-caption="Events">
                    <img src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=600&q=80" alt="Annual Day" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Annual Day Celebration</h4><span>Events</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="science" data-title="Science Lab" data-caption="Science & Labs">
                    <img src="https://images.unsplash.com/photo-1532094349884-543559c5f185?w=600&q=80" alt="Science Lab" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Science Lab</h4><span>Science &amp; Labs</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="classroom" data-title="Group Study Session" data-caption="Classroom">
                    <img src="https://images.unsplash.com/photo-1509062522246-3755977927d7?w=600&q=80" alt="Group Study" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Group Study Session</h4><span>Classroom</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="sports" data-title="Football Practice" data-caption="Sports">
                    <img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600&q=80" alt="Football" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Football Practice</h4><span>Sports</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="campus" data-title="School Library" data-caption="Campus">
                    <img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=600&q=80" alt="Library" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>School Library</h4><span>Campus</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="events" data-title="Cultural Fest" data-caption="Events">
                    <img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=600&q=80" alt="Cultural Fest" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Cultural Fest</h4><span>Events</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="science" data-title="Computer Lab" data-caption="Science & Labs">
                    <img src="https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=600&q=80" alt="Computer Lab" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Computer Lab</h4><span>Science &amp; Labs</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="classroom" data-title="Art & Craft Class" data-caption="Classroom">
                    <img src="https://images.unsplash.com/photo-1596079890701-dd32b949e9af?w=600&q=80" alt="Art Class" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Art &amp; Craft Class</h4><span>Classroom</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="sports" data-title="Basketball Court" data-caption="Sports">
                    <img src="https://images.unsplash.com/photo-1546519638-68e109498ffc?w=600&q=80" alt="Basketball" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Basketball Court</h4><span>Sports</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="campus" data-title="Green Campus" data-caption="Campus">
                    <img src="https://images.unsplash.com/photo-1498243691581-b145c3f54a5a?w=600&q=80" alt="Green Campus" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Green Campus</h4><span>Campus</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="events" data-title="Graduation Ceremony" data-caption="Events">
                    <img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?w=600&q=80" alt="Graduation" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Graduation Ceremony</h4><span>Events</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="science" data-title="Chemistry Experiments" data-caption="Science & Labs">
                    <img src="https://images.unsplash.com/photo-1554475901-4538ddfbccc2?w=600&q=80" alt="Chemistry Lab" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Chemistry Experiments</h4><span>Science &amp; Labs</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="classroom" data-title="Reading Corner" data-caption="Classroom">
                    <img src="https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=600&q=80" alt="Reading" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Reading Corner</h4><span>Classroom</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="campus" data-title="Cafeteria" data-caption="Campus">
                    <img src="https://images.unsplash.com/photo-1567521464027-f127ff144326?w=600&q=80" alt="Cafeteria" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Cafeteria</h4><span>Campus</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
                <div class="gallery-item" data-category="events" data-title="Science Fair" data-caption="Events">
                    <img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=600&q=80" alt="Science Fair" loading="lazy">
                    <div class="gallery-overlay"><div class="gallery-caption"><h4>Science Fair</h4><span>Events</span></div></div>
                    <div class="gallery-zoom"><i class="fas fa-expand-alt"></i></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-inner">
            <button class="lightbox-close" id="lightboxClose"><i class="fas fa-times"></i></button>
            <button class="lightbox-nav lightbox-prev" id="lightboxPrev"><i class="fas fa-chevron-left"></i></button>
            <img src="" alt="" id="lightboxImg">
            <button class="lightbox-nav lightbox-next" id="lightboxNext"><i class="fas fa-chevron-right"></i></button>
            <div class="lightbox-caption" id="lightboxCaption"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-grid">
            <div>
                <div class="footer-logo"><i class="fas fa-graduation-cap"></i> Bright Future Academy</div>
                <p class="footer-desc">Empowering young minds with quality education and holistic development since 1995.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div>
                <h4>Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="admissions.html">Admissions</a></li>
                    <li><a href="academics.html">Academics</a></li>
                    <li><a href="gallery.html">Gallery</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Downloads</a></li>
                </ul>
            </div>
            <div>
                <h4>Portals</h4>
                <ul class="footer-links">
                    <li><a href="#">Student Login</a></li>
                    <li><a href="#">Teacher Login</a></li>
                    <li><a href="#">Admin Login</a></li>
                    <li><a href="#">Parent Portal</a></li>
                    <li><a href="#">Alumni Portal</a></li>
                </ul>
            </div>
            <div>
                <h4>Contact Us</h4>
                <ul class="footer-contact">
                    <li><i class="fas fa-map-marker-alt"></i><span>Sector 15, Rohini<br>New Delhi – 110085</span></li>
                    <li><i class="fas fa-phone"></i><span>+91 11 2345 6789</span></li>
                    <li><i class="fas fa-envelope"></i><span>info@brightfuture.edu.in</span></li>
                    <li><i class="fas fa-clock"></i><span>Mon–Sat: 8:00 AM – 4:00 PM</span></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2024 Bright Future Academy. All Rights Reserved.</p>
            <div>
                <a href="#">Privacy Policy</a>
                <a href="#">Terms &amp; Conditions</a>
                <a href="#">Sitemap</a>
            </div>
        </div>
    </footer>

    <script>
    // ============ THEME TOGGLE ============
    let isWhiteMode = false;
    function toggleTheme() {
        isWhiteMode = !isWhiteMode;
        document.body.classList.toggle('white-mode', isWhiteMode);
        document.getElementById('toggle-label').textContent = isWhiteMode ? 'White' : '3D';
        document.getElementById('toggle-icon').className = isWhiteMode ? 'fas fa-sun' : 'fas fa-cube';
    }

    // ============ 3D CANVAS BACKGROUND ============
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let W, H, particles, shapes, mouse = {x: 0, y: 0};
    const NUM_PARTICLES = 90;
    const CONNECT_DIST = 160;

    function resize() {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
    }

    class Particle {
        constructor() { this.reset(true); }
        reset(init = false) {
            this.x = Math.random() * W;
            this.y = init ? Math.random() * H : H + 10;
            this.z = 0.3 + Math.random() * 0.7;
            this.vx = (Math.random() - 0.5) * 0.4 * this.z;
            this.vy = -(0.2 + Math.random() * 0.5) * this.z;
            this.r = 1.5 + this.z * 2.5;
            this.alpha = 0.4 + this.z * 0.5;
            const colors = ['#f0a500','#e05c2a','#5b8df0','#a0c4ff','#ffffff'];
            this.color = colors[Math.floor(Math.random() * colors.length)];
            this.life = 0;
            this.maxLife = 300 + Math.random() * 500;
        }
        update() {
            this.x += this.vx; this.y += this.vy;
            const dx = this.x - mouse.x, dy = this.y - mouse.y;
            const dist = Math.sqrt(dx*dx + dy*dy);
            if (dist < 150) {
                const force = (150 - dist) / 150 * 0.05;
                this.vx += dx / dist * force;
                this.vy += dy / dist * force;
            }
            this.vx *= 0.99; this.vy *= 0.99; this.life++;
            if (this.y < -20 || this.life > this.maxLife || this.x < -50 || this.x > W + 50) this.reset();
        }
        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.shadowBlur = 8 * this.z;
            ctx.shadowColor = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
        }
    }

    class FloatShape {
        constructor() { this.init(); }
        init() {
            this.x = Math.random() * W; this.y = Math.random() * H;
            this.size = 20 + Math.random() * 50;
            this.rot = Math.random() * Math.PI * 2;
            this.rotSpeed = (Math.random() - 0.5) * 0.008;
            this.vx = (Math.random() - 0.5) * 0.3;
            this.vy = (Math.random() - 0.5) * 0.2;
            this.alpha = 0.04 + Math.random() * 0.08;
            this.type = Math.floor(Math.random() * 3);
        }
        update() {
            this.x += this.vx; this.y += this.vy; this.rot += this.rotSpeed;
            if (this.x < -100) this.x = W + 100;
            if (this.x > W + 100) this.x = -100;
            if (this.y < -100) this.y = H + 100;
            if (this.y > H + 100) this.y = -100;
        }
        draw() {
            ctx.save();
            ctx.translate(this.x, this.y); ctx.rotate(this.rot);
            ctx.globalAlpha = this.alpha; ctx.strokeStyle = '#5b8df0'; ctx.lineWidth = 1;
            const s = this.size;
            if (this.type === 0) {
                ctx.strokeRect(-s/2, -s/2, s, s);
                ctx.rotate(Math.PI/4);
                ctx.strokeRect(-s/3, -s/3, s*0.67, s*0.67);
            } else if (this.type === 1) {
                ctx.beginPath(); ctx.moveTo(0, -s/2); ctx.lineTo(s/2, s/2); ctx.lineTo(-s/2, s/2); ctx.closePath(); ctx.stroke();
            } else {
                ctx.beginPath(); ctx.moveTo(0, -s/2); ctx.lineTo(s/2, 0); ctx.lineTo(0, s/2); ctx.lineTo(-s/2, 0); ctx.closePath(); ctx.stroke();
            }
            ctx.restore();
        }
    }

    function init() {
        resize();
        particles = Array.from({length: NUM_PARTICLES}, () => new Particle());
        shapes = Array.from({length: 14}, () => new FloatShape());
    }

    function drawBackground() {
        const grad = ctx.createLinearGradient(0, 0, W, H);
        grad.addColorStop(0, '#040d1e');
        grad.addColorStop(0.4, '#061430');
        grad.addColorStop(0.7, '#0a1a40');
        grad.addColorStop(1, '#050c22');
        ctx.fillStyle = grad; ctx.fillRect(0, 0, W, H);
        const rg = ctx.createRadialGradient(W*0.5, 0, 0, W*0.5, 0, H*0.7);
        rg.addColorStop(0, 'rgba(91,141,240,0.12)');
        rg.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = rg; ctx.fillRect(0, 0, W, H);
    }

    function drawConnections() {
        for (let i = 0; i < particles.length; i++) {
            for (let j = i + 1; j < particles.length; j++) {
                const dx = particles[i].x - particles[j].x;
                const dy = particles[i].y - particles[j].y;
                const dist = Math.sqrt(dx*dx + dy*dy);
                if (dist < CONNECT_DIST) {
                    ctx.save();
                    ctx.globalAlpha = (1 - dist / CONNECT_DIST) * 0.25;
                    ctx.strokeStyle = '#5b8df0'; ctx.lineWidth = 0.6;
                    ctx.beginPath(); ctx.moveTo(particles[i].x, particles[i].y); ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                    ctx.restore();
                }
            }
        }
    }

    function animate() {
        drawBackground();
        shapes.forEach(s => { s.update(); s.draw(); });
        drawConnections();
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', resize);
    window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
    init(); animate();

    // ============ GALLERY FILTER ============
    const filterBtns   = document.querySelectorAll('.filter-btn');
    const galleryItems = document.querySelectorAll('.gallery-item');

    const revealObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const idx = [...entry.target.parentElement.children].indexOf(entry.target);
                setTimeout(() => entry.target.classList.add('visible'), (idx % 6) * 90);
                revealObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });
    galleryItems.forEach(el => revealObserver.observe(el));

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            const f = btn.dataset.filter;
            galleryItems.forEach(item => {
                const show = f === 'all' || item.dataset.category === f;
                item.style.display = show ? '' : 'none';
                if (show && !item.classList.contains('visible'))
                    setTimeout(() => item.classList.add('visible'), 60);
            });
        });
    });

    // ============ LIGHTBOX ============
    const lightbox = document.getElementById('lightbox');
    const lbImg    = document.getElementById('lightboxImg');
    const lbCap    = document.getElementById('lightboxCaption');
    let cur = 0, vis = [];

    const getVis = () => [...galleryItems].filter(i => i.style.display !== 'none');

    function showSlide(idx) {
        const item = vis[idx];
        lbImg.style.animation = 'none'; lbImg.offsetHeight; lbImg.style.animation = '';
        lbImg.src = item.querySelector('img').src;
        lbCap.textContent = item.dataset.title + ' — ' + item.dataset.caption;
    }

    galleryItems.forEach(item => {
        item.addEventListener('click', () => {
            vis = getVis(); cur = vis.indexOf(item);
            showSlide(cur);
            lightbox.classList.add('open');
            document.body.style.overflow = 'hidden';
        });
    });

    document.getElementById('lightboxClose').addEventListener('click', () => {
        lightbox.classList.remove('open'); document.body.style.overflow = '';
    });
    lightbox.addEventListener('click', e => {
        if (e.target === lightbox) { lightbox.classList.remove('open'); document.body.style.overflow = ''; }
    });
    document.getElementById('lightboxPrev').addEventListener('click', e => {
        e.stopPropagation(); cur = (cur - 1 + vis.length) % vis.length; showSlide(cur);
    });
    document.getElementById('lightboxNext').addEventListener('click', e => {
        e.stopPropagation(); cur = (cur + 1) % vis.length; showSlide(cur);
    });
    document.addEventListener('keydown', e => {
        if (!lightbox.classList.contains('open')) return;
        if (e.key === 'Escape') { lightbox.classList.remove('open'); document.body.style.overflow = ''; }
        if (e.key === 'ArrowLeft') document.getElementById('lightboxPrev').click();
        if (e.key === 'ArrowRight') document.getElementById('lightboxNext').click();
    });
    </script>
</body>
</html>